<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>行业渗透分析图表</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top left, #eff6ff 0, #f9fafb 40%, #f3f4f6 100%);
      color: #111827;
      min-height: 100vh;
      display: flex;
    }
    /* 左侧导航菜单样式 */
    .sidebar {
      width: 240px;
      background: #ffffff;
      border-right: 1px solid #e5e7eb;
      padding: 24px 16px;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }
    .sidebar-title {
      font-size: 16px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 24px;
      padding-left: 12px;
    }
    .nav-item {
      display: block;
      padding: 10px 12px;
      margin-bottom: 4px;
      border-radius: 8px;
      color: #4b5563;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.2s;
    }
    .nav-item:hover {
      background: #f3f4f6;
      color: #111827;
    }
    .nav-item.active {
      background: #eff6ff;
      color: #2563eb;
      font-weight: 600;
    }

    /* 主内容区域样式 */
    .main-content {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
    }
    .page {
      max-width: 1120px;
      margin: 0 auto;
    }
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .page-title {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
    }
    .page-subtitle {
      margin-top: 4px;
      font-size: 12px;
      color: #6b7280;
    }
    .page-badge {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.06);
      color: #2563eb;
      font-size: 11px;
      border: 1px solid rgba(191, 219, 254, 0.9);
    }
    .card {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 14px;
      box-shadow:
        0 18px 45px rgba(15, 23, 42, 0.06),
        0 0 0 1px rgba(148, 163, 184, 0.2);
      padding: 16px 18px 18px;
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
    }
    .card-title {
      font-size: 16px;
      font-weight: 700;
      color: #111827;
    }
    .card-caption {
      font-size: 12px;
      color: #6b7280;
    }
    .hint {
      margin-top: 4px;
      font-size: 11px;
      color: #9ca3af;
    }
    .chart-wrapper {
      margin-top: 8px;
      border-radius: 10px;
      background: linear-gradient(145deg, #f9fafb, #eef2ff);
      padding: 10px;
    }
    #chart {
      width: 100%;
      height: 600px;
    }
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e5e7eb;
        padding: 16px;
      }
      .main-content {
        padding: 16px;
      }
      .card {
        padding: 14px 12px 16px;
      }
      #chart {
        height: 500px;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
  <!-- 左侧导航 -->
  <aside class="sidebar">
    <div class="sidebar-title">数据看板</div>
    <nav>
      <a href="客户阶段漏斗数据20260128.html" class="nav-item">客户转化漏斗</a>
      <a href="industry_pie_chart.html" class="nav-item">客户行业分布</a>
      <a href="industry_income_bar_chart.html" class="nav-item">行业收入分布</a>
      <a href="industry_penetration_stacked_bar.html" class="nav-item active">行业渗透分析</a>
    </nav>
  </aside>

  <!-- 主内容 -->
  <main class="main-content">
    <div class="page">
      <header class="page-header">
        <div>
          <div class="page-title">行业渗透分析图表</div>
          <p class="page-subtitle">根据付费与非付费客户统计 · 堆积柱状图</p>
        </div>
        <span class="page-badge">百度地图开放平台 · 客户分析</span>
      </header>

      <section class="card" aria-label="行业渗透堆积柱状图">
        <div class="card-header">
          <div class="card-title">各行业付费与非付费客户分布</div>
          <div class="card-caption">维度：行业 | 指标：客户数量/占比</div>
        </div>
        <p class="hint">说明：展示各行业的付费客户（总金额>0）与非付费客户（总金额=0）的数量及占比。</p>

        <div class="chart-wrapper">
          <div id="chart"></div>
        </div>
      </section>
    </div>
  </main>

  <script>
    const el = document.getElementById('chart');
    const chart = echarts.init(el);

    // 解析后的数据
    const rawData = [
      { "name": "其他", "paid": 1400, "free": 458194, "total": 459594, "paid_pct": 0.3, "free_pct": 99.7 },
      { "name": "信息服务", "paid": 1805, "free": 112572, "total": 114377, "paid_pct": 1.58, "free_pct": 98.42 },
      { "name": "企业应用", "paid": 1030, "free": 51206, "total": 52236, "paid_pct": 1.97, "free_pct": 98.03 },
      { "name": "生活服务", "paid": 506, "free": 41419, "total": 41925, "paid_pct": 1.21, "free_pct": 98.79 },
      { "name": "科研公益", "paid": 25, "free": 38764, "total": 38789, "paid_pct": 0.06, "free_pct": 99.94 },
      { "name": "教育培训", "paid": 77, "free": 36194, "total": 36271, "paid_pct": 0.21, "free_pct": 99.79 },
      { "name": "出行", "paid": 229, "free": 28162, "total": 28391, "paid_pct": 0.81, "free_pct": 99.19 },
      { "name": "系统工具", "paid": 206, "free": 26555, "total": 26761, "paid_pct": 0.77, "free_pct": 99.23 },
      { "name": "电商零售", "paid": 342, "free": 20984, "total": 21326, "paid_pct": 1.6, "free_pct": 98.4 },
      { "name": "社交网络", "paid": 125, "free": 18801, "total": 18926, "paid_pct": 0.66, "free_pct": 99.34 },
      { "name": "快递物流", "paid": 432, "free": 18133, "total": 18565, "paid_pct": 2.33, "free_pct": 97.67 },
      { "name": "智能设备", "paid": 371, "free": 15718, "total": 16089, "paid_pct": 2.31, "free_pct": 97.69 },
      { "name": "房产服务", "paid": 224, "free": 14787, "total": 15011, "paid_pct": 1.49, "free_pct": 98.51 },
      { "name": "城市政务", "paid": 93, "free": 12845, "total": 12938, "paid_pct": 0.72, "free_pct": 99.28 },
      { "name": "交通管理", "paid": 107, "free": 10279, "total": 10386, "paid_pct": 1.03, "free_pct": 98.97 },
      { "name": "金融理财", "paid": 657, "free": 8698, "total": 9355, "paid_pct": 7.02, "free_pct": 92.98 },
      { "name": "酒店旅游", "paid": 131, "free": 8149, "total": 8280, "paid_pct": 1.58, "free_pct": 98.42 },
      { "name": "智能汽车", "paid": 187, "free": 8072, "total": 8259, "paid_pct": 2.26, "free_pct": 97.74 },
      { "name": "运动健康", "paid": 80, "free": 7177, "total": 7257, "paid_pct": 1.1, "free_pct": 98.9 },
      { "name": "网约车", "paid": 67, "free": 6513, "total": 6580, "paid_pct": 1.02, "free_pct": 98.98 },
      { "name": "车主服务", "paid": 148, "free": 5784, "total": 5932, "paid_pct": 2.49, "free_pct": 97.51 },
      { "name": "传媒资讯", "paid": 75, "free": 4520, "total": 4595, "paid_pct": 1.63, "free_pct": 98.37 },
      { "name": "游戏动漫", "paid": 37, "free": 4011, "total": 4048, "paid_pct": 0.91, "free_pct": 99.09 },
      { "name": "手机厂商", "paid": 67, "free": 3079, "total": 3146, "paid_pct": 2.13, "free_pct": 97.87 },
      { "name": "商场购物", "paid": 23, "free": 3070, "total": 3093, "paid_pct": 0.74, "free_pct": 99.26 },
      { "name": "车载硬件", "paid": 109, "free": 2516, "total": 2625, "paid_pct": 4.15, "free_pct": 95.85 },
      { "name": "影音娱乐", "paid": 21, "free": 2309, "total": 2330, "paid_pct": 0.9, "free_pct": 99.1 },
      { "name": "未知行业", "paid": 0, "free": 3, "total": 3, "paid_pct": 0.0, "free_pct": 100.0 }
    ];

    const categoryData = rawData.map(item => item.name);
    const paidData = rawData.map(item => item.paid);
    const freeData = rawData.map(item => item.free);

    const option = {
      backgroundColor: 'transparent',
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'shadow' },
        backgroundColor: 'rgba(15, 23, 42, 0.96)',
        borderWidth: 0,
        textStyle: { color: '#f9fafb' },
        formatter: (params) => {
          let res = `<div style="margin-bottom:4px;font-weight:700;">${params[0].name}</div>`;
          const item = rawData.find(d => d.name === params[0].name);
          res += `
            <div style="display:flex;justify-content:space-between;min-width:180px;">
              <span>非付费客户:</span>
              <span style="font-weight:600;">${item.free.toLocaleString()} (${item.free_pct}%)</span>
            </div>
            <div style="display:flex;justify-content:space-between;min-width:180px;">
              <span>付费客户:</span>
              <span style="font-weight:600;color:#f59e0b;">${item.paid.toLocaleString()} (${item.paid_pct}%)</span>
            </div>
            <div style="margin-top:4px;border-top:1px solid rgba(255,255,255,0.2);padding-top:4px;">
              <span>总客户数:</span> <span style="font-weight:600;">${item.total.toLocaleString()}</span>
            </div>
          `;
          return res;
        }
      },
      legend: {
        data: ['非付费客户', '付费客户'],
        textStyle: { color: '#6b7280' },
        top: 0
      },
      grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: categoryData,
        axisLabel: {
          interval: 0,
          rotate: 45,
          color: '#4b5563'
        },
        axisLine: { lineStyle: { color: '#e5e7eb' } }
      },
      yAxis: {
        type: 'value',
        axisLabel: { color: '#6b7280' },
        splitLine: { lineStyle: { type: 'dashed', color: '#e5e7eb' } }
      },
      series: [
        {
          name: '非付费客户',
          type: 'bar',
          stack: 'total',
          emphasis: { focus: 'series' },
          itemStyle: { color: '#94a3b8' },
          data: freeData
        },
        {
          name: '付费客户',
          type: 'bar',
          stack: 'total',
          emphasis: { focus: 'series' },
          itemStyle: { color: '#f59e0b' }, // 使用橙色突出付费客户
          data: paidData
        }
      ]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
  </script>
</body>
</html>